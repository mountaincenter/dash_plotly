# スキャルピング戦略の哲学

## 前提認識

### 市場の不確実性
- 株式市場は長年研究されているが、不確実性が極めて高い
- 投資家心理による株価の騰落は予測困難
- **しかし、時系列データの機械的分析は人間より機械が得意**

### 本戦略の目的
**手持ちのデータのみを用いて機械的に銘柄選別し、翌営業日にスキャルピングして利益を確保する**

## 全体戦略体系（MECE）

```
投資期間軸 × リスク許容度のマトリクス

【スイング（数日〜数週間）】
├─ Core30: 市場の中心銘柄（安定性重視）
└─ 高市銘柄: 政治情勢に基づく選定（時事性重視）

【デイスキャルピング（当日決済）】
├─ Entry: 60%の投資家が納得する王道分析
│   └─ 機械的判断 + 多数派の合意形成
├─ Active: 王道から外れない範囲でリスク許容
│   └─ 集中投資可能 + ボラティリティ重視
└─ Grok尖り銘柄: バズ・話題性による異常値検知
    └─ Grok API活用（人間では捉えにくいトレンド）
```

## スキャルピング銘柄選定の考え方

### 思想C: 機械的・段階的リスク分離

#### Entry（60%合意の王道）

**対象ユーザー:** 初心者〜中級者、安全性重視

**選定基準:**
```python
価格帯: 100-1500円  # 心理的安心感、流動性
流動性: Volume × Close >= 100,000,000円  # 約定リスク回避
ボラティリティ: ATR 1.0-3.5%  # 予測可能な値動き
変動率: -3.0% 〜 +3.0%  # 安定的
テクニカル評価: 売り系以外（中立 + 買い + 強い買い）
```

**思想:**
- **60%の投資家が納得する = 売りシグナルが出ていない**
- 「中立」は「買いでも売りでもない」= 許容可能
- 機械的判断による多数派の合意形成
- 王道を守る = 基本的なリスク管理を徹底

**期待候補数:** 10-30件/日

---

#### Active（王道を外れない範囲でリスク許容）

**対象ユーザー:** 中級者〜上級者、ボラティリティ許容可能

**選定基準:**
```python
価格帯: 100-3000円  # より広範囲（流動性は担保）
流動性: Volume × Close >= 50,000,000円 OR vol_ratio >= 150%
ボラティリティ: ATR >= 2.5%  # 高ボラティリティ必須
変動率: |change_pct| >= 2.0%  # 当日既に動いている銘柄
テクニカル評価: 条件なし（削除）
```

**思想:**
- **スキャルピングの利益源泉 = ボラティリティ**
- overall_rating を条件にしない = 機械的・データドリブン
- 「王道を外れない」= 価格・流動性・ATRで健全性を担保
- テクニカル評価は参考情報として計算するが、選別条件にしない

**期待候補数:** 20-50件/日

---

#### Grok尖り銘柄（既存実装維持）

**対象ユーザー:** 上級者、話題性・バズに賭ける

**選定基準:**
- Grok API による異常値検知
- Entry/Activeとは独立した選定軸

**思想:**
- 人間では捉えにくいトレンド・バズを機械的に検知
- 高リスク・高リターン

---

## 設計原則

### 1. 機械的判断の徹底
- **人間のバイアスを排除**
- データのみに基づく選別
- overall_rating は「計算はするが、過度に依存しない」

### 2. 段階的リスク分離
- Entry: 安全性重視（多数派合意）
- Active: ボラティリティ重視（機会創出）
- Grok: 異常値検知（バズ・話題性）

### 3. 王道からの逸脱防止
- 価格帯による健全性担保（100-3000円）
- 流動性による約定リスク回避
- ATRによるボラティリティ管理

### 4. 自己責任の大前提
- 市場は不確実
- 機械的選別 ≠ 利益保証
- 最終判断は投資家自身

---

## 実装の変遷

### 問題発生（2025-10-19実行結果）
- Entry候補: 0件
- Active候補: 0件
- 原因: overall_rating条件が厳しすぎる（「買い」「強い買い」のみ）

### 解決策（2025-10-19実装）

**Entry条件変更:**
```python
# Before
overall_rating.isin(['買い', '強い買い'])

# After
~overall_rating.isin(['売り', '強い売り'])
```

**Active条件変更:**
```python
# Before
overall_rating.isin(['買い', '強い買い'])

# After
# overall_rating条件を完全削除
```

---

## 期待される効果

1. **機会創出:** 毎営業日に取引候補が確保される
2. **リスク分離:** Entry/Active で明確に投資家層を分ける
3. **機械的判断:** バイアスなしにデータで選別
4. **王道維持:** 価格・流動性・ATRで健全性担保

---

## 次のステップ

### 1. データ検証（STEP 5.5の活用）
- overall_rating分布の確認
- 各条件の通過率分析
- 候補数の妥当性検証

### 2. 継続的改善
- 実取引結果のフィードバック
- 条件の微調整（データドリブン）
- 機械学習モデルの導入検討

### 3. モニタリング
- 日次の候補数推移
- Entry/Activeのパフォーマンス比較
- 市場環境との相関分析

---

**最終更新:** 2025-10-19
**関連コミット:**
- `cc5c1b0` STEP 5.5復元
- `7184adf` スクリーニング条件変更
